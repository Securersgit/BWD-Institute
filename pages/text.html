<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Academic Goals</title>
<style>
  :root{
    --bg:#f3f0ff;
    --card:#ffffff;
    --ink:#1f2430;
    --muted:#6b7280;
    --brand:#0b3d91;
    --brand-10:#e9edff;
    --focus:#5b6cff;
    --line:#e8e8ef;
    --pill:#edeaff;
    --high:#bfc7ff;
    --shadow: 0 2px 8px rgba(0,0,0,.05);
    --radius:14px;
  }

  *{box-sizing:border-box;}
  body{
    margin:0;
    background:#f2f3fb;
    font:14px/1.4 Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
    color:var(--ink);
  }

  .goals-wrap{
    max-width: 980px;
    margin: 20px auto 60px;
    padding: 0 16px;
  }

  .goal-info{
    background:var(--card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    border:1px solid #ebeaf6;
    padding:18px 20px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:16px;
  }
  .goal-info h2{
    margin:0 0 6px;
    font-size:18px;
    font-weight:700;
  }
  .goal-info p{
    margin:0;
    color:var(--muted);
    font-size:13px;
  }
  .btn{
    appearance:none;border:0;cursor:pointer;
    padding:10px 14px;border-radius:10px;
    background:#08368e;color:#fff;font-weight:600;
    display:inline-flex;gap:10px;align-items:center;
    transition:transform .04s ease, background .2s ease, box-shadow .2s ease;
  }
  .btn span.plus{
    display:inline-grid;place-items:center;
    width:24px;height:24px;border-radius:6px;
    background:#072e78;color:#fff;font-size:16px;line-height:0;
  }
  .btn:hover{background:#0a4fdf}
  .btn:active{transform:translateY(1px)}

  .section{
    margin-top:18px;
    background:#fff;
    border:1px solid #ebeaf6;
    border-radius:12px;
    box-shadow:var(--shadow);
    padding:18px;
  }
  .section-title{
    font-size:16px;font-weight:700;margin:0 0 12px;
  }

  .goal-card{
    background:var(--card);
    border:1px solid var(--line);
    border-radius:12px;
    padding:18px 18px 14px;
    box-shadow: var(--shadow);
    display:grid;
    gap:10px;
    position:relative;
    overflow:hidden;
    animation:flyin .4s ease both;
  }
  .goal-card + .goal-card{ margin-top:14px; }

  @keyframes flyin{
    from{opacity:0; transform:translateY(8px)}
    to{opacity:1; transform:translateY(0)}
  }

  .goal-top{
    display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
  }
  .goal-title{
    display:flex;align-items:center;gap:10px;
    font-weight:800;
  }
  .dot{
    width:10px;height:10px;border-radius:50%;
    background:#6a6ae6;box-shadow:0 0 0 4px #efefff inset;
  }
  .pill{
    margin-left:8px;
    display:inline-flex;align-items:center;gap:6px;
    font-size:11px;font-weight:700;
    padding:3px 8px;border-radius:999px;
    background:var(--high);color:#4a50a8;
  }
  .more{
    border:0;background:transparent;cursor:pointer;
    color:#999;font-size:18px;line-height:1;padding:4px 6px;
  }

  .desc{
    margin:0;color:#2d2f38;font-size:13px;
  }

  .bar-wrap{
    margin-top:2px;
  }
  .bar-label{
    font-size:12px;color:#6f6f80;margin-bottom:6px;
  }
  .bar{
    position:relative;height:8px;border-radius:999px;background:var(--brand-10);overflow:hidden;
  }
  .bar > span{
    position:absolute;inset:0 auto 0 0;width:0%;
    background:var(--brand);
    border-radius:999px;
    transition:width .6s cubic-bezier(.22,1,.36,1);
  }
  .bar-right{
    position:absolute;right:0;top:-22px;font-size:12px;color:#111;font-weight:700;
  }

  .meta{
    display:flex;align-items:center;gap:14px;color:#6c6f78;font-size:12px;margin-top:6px;
  }
  .meta .sep{opacity:.35}
  .actions{
    display:flex;gap:14px;margin-left:auto;font-size:12px;
  }
  .action-link{
    color:#4c48e6;text-decoration:none;font-weight:700;cursor:pointer;
  }

  .completed-wrap{
    margin-top:18px;background:#ece9ff5a;border:1px solid #dedaf8;
    padding:18px;border-radius:12px;
  }
  .completed-item{
    background:#dbe3ff;border:1px solid #c5cfff;border-radius:12px;padding:14px 16px;
    display:flex;align-items:center;justify-content:space-between;gap:12px;
  }
  .done-left{display:flex;align-items:center;gap:12px}
  .tick{
    width:36px;height:36px;border-radius:999px;
    display:grid;place-items:center;background:#0a4bd9;color:#fff;font-weight:900;
  }
  .trophy{
    width:36px;height:36px;border-radius:999px;background:#062a69;
    display:grid;place-items:center;color:#fff;font-size:14px;
  }
  .done-title{font-weight:800;margin:0 0 2px}
  .done-sub{margin:0;color:#50566c;font-size:13px}
  .done-date{margin:6px 0 0;color:#0352c7;font-weight:800;font-size:12px}

  .modal-backdrop{
    position:fixed;inset:0;background:rgba(8,11,30,.5);
    display:none;place-items:center;z-index:50;
  }
  .modal{
    width:min(700px,92vw);background:#fff;border-radius:16px;border:1px solid #ececf6;
    box-shadow:0 20px 50px rgba(14, 20, 56, .25);
    overflow:hidden;animation:pop .18s ease both;
  }
  @keyframes pop{from{opacity:0;transform:translateY(10px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}
  .modal-head{
    display:flex;justify-content:space-between;align-items:center;padding:16px 18px;border-bottom:1px solid #f0f0f6;
  }
  .modal-head h3{margin:0;font-size:16px}
  .modal-body{padding:16px 18px;display:grid;gap:12px}
  .grid{
    display:grid;gap:12px;grid-template-columns:1fr 1fr;
  }
  .field{display:grid;gap:6px}
  .label{font-size:12px;color:#4f566b;font-weight:600}
  input[type="text"], input[type="date"], input[type="number"], textarea, select{
    width:100%;padding:10px 12px;border:1px solid #d9dbe7;border-radius:10px;outline:none;
    font:inherit;background:#fff;
  }
  textarea{min-height:80px;resize:vertical}
  input:focus, textarea:focus, select:focus{box-shadow:0 0 0 3px var(--focus, #5b6cff3d);border-color:#9aa3ff}
  .modal-foot{
    padding:14px 18px;border-top:1px solid #f0f0f6;display:flex;gap:10px;justify-content:flex-end;
  }
  .btn-ghost{
    background:#f3f4f8;color:#111;border-radius:10px;padding:10px 14px;border:1px solid #e7e8f1;
    font-weight:700;cursor:pointer;
  }

  @media (max-width:720px){
    .goal-info{flex-direction:column;align-items:flex-start}
    .grid{grid-template-columns:1fr}
    .bar-right{top:-20px}
  }
</style>
</head>
<body>

<section class="goals-wrap">

  <!-- Top header -->
  <div class="goal-info">
    <div>
      <h2>Academic Goals</h2>
      <p>Set and track learning objectives for Dudu Emmanuel</p>
    </div>
    <button class="btn" id="openModal">New Goal <span class="plus">+</span></button>
  </div>

  <!-- Active Goals -->
  <section class="section" id="activeSection">
    <h3 class="section-title">Active Goals</h3>
    <div id="noActiveGoals" style="text-align:center; padding:40px; color:var(--muted);">
      <p>No active goals yet. Click "New Goal" to get started!</p>
    </div>
  </section>

  <!-- Completed Goals -->
  <section class="completed-wrap">
    <h3 class="section-title">Completed Goals</h3>
    <div id="noCompletedGoals" style="text-align:center; padding:40px; color:var(--muted);">
      <p>No completed goals yet.</p>
    </div>
  </section>

</section>

<!-- ====== MODAL ====== -->
<div class="modal-backdrop" id="modal">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="newGoalTitle">
    <div class="modal-head">
      <h3 id="newGoalTitle">New Goal</h3>
      <button class="more" id="closeModal" aria-label="Close">✕</button>
    </div>
    <form id="goalForm">
      <div class="modal-body">
        <div class="field">
          <label class="label" for="gTitle">Goal name</label>
          <input id="gTitle" type="text" placeholder="e.g., Improve GST 402 to A+" required>
        </div>

        <div class="field">
          <label class="label" for="gPriority">Priority</label>
          <select id="gPriority" required>
            <option value="high" selected>High</option>
            <option value="medium">Medium</option>
            <option value="low">Low</option>
          </select>
        </div>

        <div class="field">
          <label class="label" for="gDesc">Description</label>
          <textarea id="gDesc" placeholder="What is the goal? e.g., Raise GST grade from A to A+ (95%+)"></textarea>
        </div>

        <div class="grid">
          <div class="field">
            <label class="label" for="gCurrent">Current Progress (%)</label>
            <input id="gCurrent" type="number" min="0" max="100" value="0" required>
          </div>
          <div class="field">
            <label class="label" for="gTarget">Target (%)</label>
            <input id="gTarget" type="number" min="1" max="100" value="95" required>
          </div>
        </div>

        <div class="grid">
          <div class="field">
            <label class="label" for="gDue">Due date</label>
            <input id="gDue" type="date" required>
          </div>
          <div class="field">
            <label class="label" for="gCategory">Category</label>
            <input id="gCategory" type="text" placeholder="Academic" value="Academic" required>
          </div>
        </div>
      </div>
      <div class="modal-foot">
        <button type="button" class="btn-ghost" id="cancelModal">Cancel</button>
        <button type="submit" class="btn">Create Goal <span class="plus">+</span></button>
      </div>
    </form>
  </div>
</div>

<script>
  // ===== Helpers =====
  const qs = (s, el=document) => el.querySelector(s);
  const qsa = (s, el=document) => [...el.querySelectorAll(s)];

  // ===== Modal control =====
  const modal = qs('#modal');
  const openModalBtn = qs('#openModal');
  const closeModalBtn = qs('#closeModal');
  const cancelBtn = qs('#cancelModal');

  function openModal(){ modal.style.display='grid'; qs('#gTitle').focus(); }
  function closeModal(){ modal.style.display='none'; }

  openModalBtn.addEventListener('click', openModal);
  closeModalBtn.addEventListener('click', closeModal);
  cancelBtn.addEventListener('click', closeModal);
  modal.addEventListener('click', (e)=> { if(e.target===modal) closeModal(); });

  // ===== Goal Management =====
  const form = qs('#goalForm');
  const activeSection = qs('#activeSection');
  const completedSection = qs('.completed-wrap');

  // Load goals from localStorage
  function loadGoals() {
    const goals = JSON.parse(localStorage.getItem('academicGoals')) || { active: [], completed: [] };
    
    // Clear existing content
    const activeCards = qsa('.goal-card', activeSection);
    activeCards.forEach(card => card.remove());
    
    const completedItems = qsa('.completed-item', completedSection);
    completedItems.forEach(item => item.remove());
    
    // Show/hide empty states
    const noActiveGoals = qs('#noActiveGoals');
    const noCompletedGoals = qs('#noCompletedGoals');
    noActiveGoals.style.display = goals.active.length === 0 ? 'block' : 'none';
    noCompletedGoals.style.display = goals.completed.length === 0 ? 'block' : 'none';
    
    // Render active goals
    goals.active.forEach(goal => createGoalCard(goal));
    
    // Render completed goals
    goals.completed.forEach(goal => createCompletedGoal(goal));
  }

  // Save goals to localStorage
  function saveGoals(goals) {
    localStorage.setItem('academicGoals', JSON.stringify(goals));
  }

  // Create goal card
  function createGoalCard(goal) {
    const card = document.createElement('article');
    card.className = 'goal-card';
    card.dataset.current = goal.current;
    card.dataset.target = goal.target;
    card.dataset.id = goal.id;

    card.innerHTML = `
      <div class="goal-top">
        <div>
          <div class="goal-title">
            <span class="dot"></span>
            ${escapeHtml(goal.title)}
            <span class="pill">${escapeHtml(goal.priority)}</span>
          </div>
          <p class="desc">${escapeHtml(goal.description)}</p>
        </div>
        <button class="more" aria-label="More" onclick="deleteGoal('${goal.id}')">×</button>
      </div>

      <div class="bar-wrap">
        <div class="bar-label">Progress</div>
        <div class="bar">
          <span></span>
          <div class="bar-right"><b class="pc">${goal.current}%</b> of <b class="tgt">${goal.target}%</b></div>
        </div>
      </div>

      <div class="meta">
        <div>Due: <b>${escapeHtml(goal.due)}</b></div>
        <span class="sep">|</span>
        <div>${escapeHtml(goal.category)}</div>
        <div class="actions">
          <a class="action-link update" onclick="updateProgress('${goal.id}')">Update</a>
          <a class="action-link edit" onclick="editGoal('${goal.id}')">Edit</a>
          <a class="action-link" onclick="completeGoal('${goal.id}')" style="color:#0a4bd9;">Complete</a>
        </div>
      </div>
    `;

    activeSection.appendChild(card);
    updateProgressBar(card);
    const noActiveGoals = qs('#noActiveGoals');
    noActiveGoals.style.display = 'none';
  }

  // Create completed goal
  function createCompletedGoal(goal) {
    const item = document.createElement('div');
    item.className = 'completed-item';
    item.dataset.id = goal.id;

    item.innerHTML = `
      <div class="done-left">
        <div class="tick">✓</div>
        <div>
          <p class="done-title">${escapeHtml(goal.title)}</p>
          <p class="done-sub">${escapeHtml(goal.description)}</p>
          <p class="done-date">Completed on ${new Date().toLocaleDateString()}</p>
        </div>
      </div>
      <div class="trophy">🏆</div>
    `;

    completedSection.appendChild(item);
    const noCompletedGoals = qs('#noCompletedGoals');
    noCompletedGoals.style.display = 'none';
  }

  // Update progress bar
  function updateProgressBar(card) {
    const cur = parseInt(card.dataset.current || '0', 10);
    const tgt = parseInt(card.dataset.target || '100', 10);
    const fill = Math.max(0, Math.min(100, cur / Math.max(1,tgt) * 100));
    const span = qs('.bar > span', card);
    const pc = qs('.pc', card);
    const tgtEl = qs('.tgt', card);
    
    if (span) {
      setTimeout(() => {
        span.style.width = fill + '%';
      }, 100);
    }
    if (pc) pc.textContent = cur + '%';
    if (tgtEl) tgtEl.textContent = tgt + '%';
  }

  // Add new goal
  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    const title = qs('#gTitle').value.trim();
    const priority = qs('#gPriority').value;
    const description = qs('#gDesc').value.trim() || '—';
    const current = parseInt(qs('#gCurrent').value,10);
    const target = parseInt(qs('#gTarget').value,10);
    const due = qs('#gDue').value || '—';
    const category = qs('#gCategory').value.trim() || 'General';

    const goals = JSON.parse(localStorage.getItem('academicGoals')) || { active: [], completed: [] };
    
    const newGoal = {
      id: Date.now().toString(),
      title,
      description,
      priority,
      current,
      target,
      due,
      category
    };
    
    goals.active.push(newGoal);
    saveGoals(goals);
    createGoalCard(newGoal);
    closeModal();
    form.reset();
  });

  // Update progress
  function updateProgress(goalId) {
    const goals = JSON.parse(localStorage.getItem('academicGoals')) || { active: [], completed: [] };
    const goal = goals.active.find(g => g.id === goalId);
    if (goal) {
      const newProgress = prompt('Update progress (%)', goal.current);
      if (newProgress !== null) {
        const progress = Math.max(0, Math.min(100, parseInt(newProgress, 10) || 0));
        goal.current = progress;
        saveGoals(goals);
        loadGoals();
      }
    }
  }

  // Complete goal
  function completeGoal(goalId) {
    const goals = JSON.parse(localStorage.getItem('academicGoals')) || { active: [], completed: [] };
    const goalIndex = goals.active.findIndex(g => g.id === goalId);
    if (goalIndex !== -1) {
      const goal = goals.active.splice(goalIndex, 1)[0];
      goals.completed.push(goal);
      saveGoals(goals);
      loadGoals();
    }
  }

  // Delete goal
  function deleteGoal(goalId) {
    const goals = JSON.parse(localStorage.getItem('academicGoals')) || { active: [], completed: [] };
    goals.active = goals.active.filter(g => g.id !== goalId);
    saveGoals(goals);
    loadGoals();
  }

  // Edit goal
  function editGoal(goalId) {
    const goals = JSON.parse(localStorage.getItem('academicGoals')) || { active: [], completed: [] };
    const goal = goals.active.find(g => g.id === goalId);
    if (goal) {
      qs('#gTitle').value = goal.title;
      qs('#gPriority').value = goal.priority;
      qs('#gDesc').value = goal.description;
      qs('#gCurrent').value = goal.current;
      qs('#gTarget').value = goal.target;
      qs('#gDue').value = goal.due;
      qs('#gCategory').value = goal.category;
      openModal();
    }
  }

  // Escape HTML
  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'<','>':'>','"':'"',"'":'&#39;'}[m]));
  }

  // Initialize
  loadGoals();
</script>
</body>
</html>
